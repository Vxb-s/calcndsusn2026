<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Налоговый Калькулятор 2026 (РФ) - Финальная версия</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f7f6;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #0056b3;
            text-align: center;
            margin-bottom: 30px;
        }
        .input-group {
            margin-bottom: 20px;
            display: flex;
            gap: 20px;
            align-items: center;
        }
        .input-group label {
            flex: 1;
            font-weight: bold;
        }
        .input-group input {
            flex: 2;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 16px;
        }
        button {
            width: 100%;
            padding: 15px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #218838;
        }
        .result-section {
            margin-top: 30px;
            border-top: 2px solid #eee;
            padding-top: 20px;
        }
        .result-section h2 {
            color: #0056b3;
            margin-bottom: 15px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f0f8ff;
            color: #0056b3;
        }
        .total {
            font-weight: bold;
            background-color: #e6f7e6;
            color: #218838;
        }
        .limit-info {
            margin-top: 30px;
            padding: 15px;
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 6px;
            color: #856404;
        }
        .recommendation {
            margin-top: 20px;
            padding: 15px;
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 6px;
            color: #0c5460;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Налоговый Калькулятор 2026 (РФ)</h1>
    <p>Введите ваш **годовой** доход (выручку, включая НДС) и **годовые** расходы (включая НДС) для сравнения налоговой нагрузки.</p>

    <div class="input-group">
        <label for="income">Годовой доход (Выручка, руб., включая НДС):</label>
        <input type="number" id="income" placeholder="Например, 100000" value="">
    </div>

    <div class="input-group">
        <label for="expenses">Годовые расходы (руб., включая НДС):</label>
        <input type="number" id="expenses" placeholder="Например, 80000" value="">
    </div>

    <button onclick="calculateTaxes()">Рассчитать налоговую нагрузку</button>

    <div id="results" class="result-section" style="display: none;">
        <h2>Сводная таблица налогов</h2>
        <table id="results-table">
            <thead>
                <tr>
                    <th>Сценарий</th>
                    <th>Налог УСН/Прибыль (руб.)</th>
                    <th>НДС к уплате (руб.)</th>
                    <th>Итого Налог к уплате (руб.)</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>

        <div id="recommendation-div" class="recommendation"></div>

        <div id="limit-message" class="limit-info">
            </div>
    </div>
</div>

<script>
    // --- КОНСТАНТЫ И ЛИМИТЫ (2026, согласно законопроектам) ---
    const INCOME_LIMIT_NDS = 10000000;      // Лимит дохода для входа в НДС (УСН)
    const INCOME_LIMIT_USN_5 = 250000000;   // Лимит дохода для ставки НДС 5% (верхний)
    const INCOME_LIMIT_USN_7 = 450000000;   // Лимит дохода для ставки НДС 7% (верхний)
    const RATE_USN_6 = 0.06;
    const RATE_USN_15 = 0.15;
    const RATE_NDS_5 = 0.05;
    const RATE_NDS_7 = 0.07;
    const RATE_PROFIT_25 = 0.25;            // Условная ставка налога на прибыль/НДФЛ на ОСНО
    const RATE_NDS_22 = 0.22;               // Общая ставка НДС
    
    // ВАЖНО: Входящий и исходящий НДС теперь 22%
    const CALC_NDS_22 = RATE_NDS_22 / (1 + RATE_NDS_22); // 22/122
    const CALC_NDS_22_IN = CALC_NDS_22;                  // 22/122 для входящего НДС

    // Расчетные ставки для выделения льготного НДС
    const CALC_NDS_5 = RATE_NDS_5 / (1 + RATE_NDS_5);       // 5/105
    const CALC_NDS_7 = RATE_NDS_7 / (1 + RATE_NDS_7);       // 7/107
    
    // --- ФУНКЦИИ РАСЧЕТА ---

    function formatNumber(num) {
        if (num === 0) return '0';
        return Math.round(num).toLocaleString('ru-RU');
    }

    function calculateTaxes() {
        const income = parseFloat(document.getElementById('income').value) || 0;
        const expenses = parseFloat(document.getElementById('expenses').value) || 0;
        const resultsBody = document.querySelector('#results-table tbody');
        const resultsSection = document.getElementById('results');
        const limitMessageDiv = document.getElementById('limit-message');
        const recommendationDiv = document.getElementById('recommendation-div');
        
        resultsBody.innerHTML = '';
        limitMessageDiv.innerHTML = '';
        recommendationDiv.innerHTML = '';
        resultsSection.style.display = 'none';

        if (income < 0 || expenses < 0) {
            alert("Пожалуйста, введите корректные числовые значения (не отрицательные).");
            return;
        }

        const scenarios = [];
        let incomeNet = 0; 

        // 1. ОСВОБОЖДЕНИЕ ОТ НДС (До 10 млн ₽)
        if (income < INCOME_LIMIT_NDS) {
            incomeNet = income;
            // УСН 6%
            scenarios.push({
                name: 'УСН 6% (Доходы) - Без НДС',
                usn_tax: incomeNet * RATE_USN_6,
                nds_tax: 0,
                total: incomeNet * RATE_USN_6
            });
            // УСН 15%
            const base15_0 = Math.max(0, incomeNet - expenses);
            scenarios.push({
                name: 'УСН 15% (Д-Р) - Без НДС',
                usn_tax: base15_0 * RATE_USN_15,
                nds_tax: 0,
                total: base15_0 * RATE_USN_15
            });

        } 
        
        // 2. УСН + НДС 5% (10 млн - 250 млн)
        if (income >= INCOME_LIMIT_NDS && income <= INCOME_LIMIT_USN_5) {
            // A. Льготная ставка НДС 5% (без вычета)
            const nds_out_5 = income * CALC_NDS_5;
            incomeNet = income - nds_out_5;
            // УСН 6%
            scenarios.push({
                name: 'УСН 6% + НДС 5%',
                usn_tax: incomeNet * RATE_USN_6,
                nds_tax: nds_out_5,
                total: (incomeNet * RATE_USN_6) + nds_out_5
            });
            // УСН 15% (Расходы в полной сумме)
            const base15_5 = Math.max(0, incomeNet - expenses); 
            scenarios.push({
                name: 'УСН 15% (Д-Р) + НДС 5%',
                usn_tax: base15_5 * RATE_USN_15,
                nds_tax: nds_out_5,
                total: (base15_5 * RATE_USN_15) + nds_out_5
            });
            
             // B. Общая ставка НДС 22% (с вычетом) для УСН
            calculateStandardNDS(scenarios, income, expenses, 'УСН');
        }

        // 3. УСН + НДС 7% (250 млн - 450 млн)
        if (income > INCOME_LIMIT_USN_5 && income <= INCOME_LIMIT_USN_7) {
            // A. Льготная ставка НДС 7% (без вычета)
            const nds_out_7 = income * CALC_NDS_7;
            incomeNet = income - nds_out_7;
            // УСН 6%
            scenarios.push({
                name: 'УСН 6% + НДС 7%',
                usn_tax: incomeNet * RATE_USN_6,
                nds_tax: nds_out_7,
                total: (incomeNet * RATE_USN_6) + nds_out_7
            });
            // УСН 15% (Расходы в полной сумме)
            const base15_7 = Math.max(0, incomeNet - expenses); 
            scenarios.push({
                name: 'УСН 15% (Д-Р) + НДС 7%',
                usn_tax: base15_7 * RATE_USN_15,
                nds_tax: nds_out_7,
                total: (base15_7 * RATE_USN_15) + nds_out_7
            });
            
             // B. Общая ставка НДС 22% (с вычетом) для УСН
            calculateStandardNDS(scenarios, income, expenses, 'УСН');
        }
        
        // 4. ОСНО + НДС 22% (Всегда)
        calculateStandardNDS(scenarios, income, expenses, 'ОСНО');
        
        // --- ОБЩИЙ РАСЧЕТ ДЛЯ СТАНДАРТНОЙ СТАВКИ (НДС 22%) ---
        function calculateStandardNDS(arr, income, expenses, mode) {
            // Исходящий НДС
            const nds_out = income * CALC_NDS_22;
            const income_net_std = income - nds_out;

            // Входящий НДС (ВНИМАНИЕ: ставка 22/122)
            const nds_in = expenses * CALC_NDS_22_IN;
            const nds_to_pay = Math.max(0, nds_out - nds_in);
            
            // Расходы для налоговой базы (без входящего НДС)
            const expenses_net = expenses - nds_in;
            const base = Math.max(0, income_net_std - expenses_net); 
            
            if (mode === 'УСН') {
                // УСН 6% с вычетом
                arr.push({
                    name: 'УСН 6% + НДС 22% (с вычетом)',
                    usn_tax: income_net_std * RATE_USN_6,
                    nds_tax: nds_to_pay,
                    total: (income_net_std * RATE_USN_6) + nds_to_pay
                });
                // УСН 15% с вычетом
                arr.push({
                    name: 'УСН 15% (Д-Р) + НДС 22% (с вычетом)',
                    usn_tax: base * RATE_USN_15,
                    nds_tax: nds_to_pay,
                    total: (base * RATE_USN_15) + nds_to_pay
                });
            } else if (mode === 'ОСНО') {
                // ОСНО (Налог на прибыль 25%)
                const profit_tax = base * RATE_PROFIT_25;
                arr.push({
                    name: 'ОСНО + НДС 22%',
                    usn_tax: profit_tax, 
                    nds_tax: nds_to_pay,
                    total: profit_tax + nds_to_pay
                });
            }
        }

        // --- ВЫВОД РЕЗУЛЬТАТОВ И РЕКОМЕНДАЦИЙ ---
        if (scenarios.length === 0 && income > 0) {
             // Сценарий не должен срабатывать, но оставлен для отлова ошибок.
            limitMessageDiv.innerHTML = '<p style="color: red;">Ошибка: Не удалось рассчитать сценарии.</p>';
            resultsSection.style.display = 'block';
            return;
        }
        
        scenarios.sort((a, b) => a.total - b.total);
        let bestScenario = scenarios[0];

        scenarios.forEach(scenario => {
            const row = resultsBody.insertRow();
            if (scenario === bestScenario) {
                row.classList.add('total');
            }
            row.insertCell().textContent = scenario.name;
            row.insertCell().textContent = formatNumber(scenario.usn_tax) + ' ₽';
            row.insertCell().textContent = formatNumber(scenario.nds_tax) + ' ₽';
            row.insertCell().textContent = formatNumber(scenario.total) + ' ₽';
        });

        // 4. Логика рекомендации
        
        const incomeNetForRec = income < INCOME_LIMIT_NDS ? income : income * (1 - CALC_NDS_22); // Для ОСНО
        const expensesRatio = incomeNetForRec > 0 ? expenses / incomeNetForRec : 0;
        
        let recommendationText = '';
        const expensesPercent = Math.round(expensesRatio * 100);

        if (bestScenario.name.includes('ОСНО')) {
            recommendationText = `<p>Самый выгодный режим: **${bestScenario.name}**.</p>
                                  <p>💡 **Вывод:** С учетом ваших высоких расходов (около ${expensesPercent}% чистого дохода) и права на вычет НДС, **Общая система налогообложения** оказалась оптимальной.</p>`;
        } else if (bestScenario.name.includes('6%')) {
            recommendationText = `<p>Самый выгодный режим: **${bestScenario.name}**.</p>
                                  <p>💡 **Вывод:** Ваши расходы составляют ${expensesPercent}% от чистого дохода. Поскольку доля расходов относительно низка, режим **УСН "Доходы"** является оптимальным.</p>`;
        } else if (bestScenario.name.includes('15%')) {
            recommendationText = `<p>Самый выгодный режим: **${bestScenario.name}**.</p>
                                  <p>💡 **Вывод:** Ваши расходы составляют ${expensesPercent}% от чистого дохода. Поскольку доля расходов высока, режим **УСН "Доходы минус Расходы"** является оптимальным.</p>`;
        }
        
        // 5. Вывод лимитов
        let limitMsg = `
            <p><strong>Введенный годовой доход: ${formatNumber(income)} ₽.</strong></p>
            <h3>⚠️ Применимые ограничения и лимиты (2026):</h3>
        `;
        if (income < INCOME_LIMIT_NDS) {
            limitMsg += `<p>✅ Ваш доход **ниже** лимита (${formatNumber(INCOME_LIMIT_NDS)} ₽). Вы имеете право на **Освобождение от НДС**.</p>`;
        } else if (income <= INCOME_LIMIT_USN_5) {
            limitMsg += `<p>❌ Ваш доход **превышает** лимит ${formatNumber(INCOME_LIMIT_NDS)} ₽. Вы обязаны платить НДС.</p>
                         <p>✅ Вы остаетесь на УСН с выбором льготной ставки **НДС 5%** или общей **22%**.</p>`;
        } else if (income <= INCOME_LIMIT_USN_7) {
            limitMsg += `<p>❌ Ваш доход **превышает** лимит ${formatNumber(INCOME_LIMIT_NDS)} ₽. Вы обязаны платить НДС.</p>
                         <p>✅ Вы остаетесь на УСН с выбором льготной ставки **НДС 7%** или общей **22%**.</p>`;
        } else {
            limitMsg += `<p>❌ Ваш доход **превышает** максимальный лимит УСН (${formatNumber(INCOME_LIMIT_USN_7)} ₽).</p>
                         <p>❌ Вы обязаны перейти на **ОСНО**.</p>`;
        }
        
        recommendationDiv.innerHTML = '<h2>Рекомендация по выбору режима</h2>' + recommendationText;
        limitMessageDiv.innerHTML = limitMsg;
        resultsSection.style.display = 'block';
    }
</script>

</body>
</html>